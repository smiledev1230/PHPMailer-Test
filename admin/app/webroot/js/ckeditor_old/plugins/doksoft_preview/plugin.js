CKEDITOR.plugins.add('doksoft_preview',{lang:['en','ru','es'],init:function(a){if(typeof a.lang.doksoft_preview.doksoft_preview!='undefined'){a.lang.doksoft_preview=a.lang.doksoft_preview.doksoft_preview;}var b=a.addCommand('doksoft_preview',new CKEDITOR.dialogCommand('doksoft_preview'));b.modes={wysiwyg:1,source:0};b.canUndo=true;b.addParam='image';if(CKEDITOR.version.charAt(0)=='4'){a.ui.addButton('doksoft_preview',{label:a.lang.doksoft_preview.button_label,command:'doksoft_preview',icon:this.path+'doksoft_preview_4.png'});}else{a.ui.addButton('doksoft_preview',{label:a.lang.doksoft_preview.button_label,command:'doksoft_preview',icon:this.path+'doksoft_preview.png'});}CKEDITOR.dialog.add('doksoft_preview',this.path+'dialogs/dlg_upload.js');}});